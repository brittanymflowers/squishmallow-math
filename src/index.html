<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Squishmallow Collector - Math Adventure</title>

    <!-- Google Fonts for child-friendly typography -->
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One:wght@400&family=Quicksand:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Main stylesheet -->
    <link rel="stylesheet" href="css/main.css" />

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  </head>
  <body>
    <!-- Main application container -->
    <div id="app">
      <!-- Loading screen (shown first) -->
      <div id="loading-screen" class="screen active">
        <div class="loading-content">
          <div class="squishmallow-mascot">
            <img
              src="assets/luna_the_cat.png"
              alt="Adorable Luna the Cat Squishmallow"
              class="mascot-image"
            />
          </div>
          <h1 class="game-title">Squishmallow Collector</h1>
          <h2 class="subtitle">Math Adventure Loading...</h2>
          <div class="loading-spinner">
            <div class="spinner"></div>
          </div>
        </div>
      </div>

      <!-- Dashboard screen (hidden initially, will be shown in Story 1.3) -->
      <div id="dashboard-screen" class="screen">
        <div class="dashboard-content">
          <div class="squishmallow-mascot">
            <img
              src="assets/luna_the_cat.png"
              alt="Adorable Luna the Cat Squishmallow"
              class="mascot-image small"
            />
          </div>
          <h1 class="game-title">Squishmallow Collector</h1>
          <h2 class="subtitle">Math Adventure</h2>

          <!-- Dashboard Navigation Buttons -->
          <div class="button-container">
            <button id="start-game-btn" class="dashboard-button primary">
              <span class="button-icon"><i data-lucide="gamepad-2"></i></span>
              <span class="button-text">Start New Game</span>
              <span class="button-subtitle">Begin your math adventure!</span>
            </button>

            <button id="view-collection-btn" class="dashboard-button secondary">
              <span class="button-icon"><i data-lucide="book-open"></i></span>
              <span class="button-text">View Collection</span>
              <span class="button-subtitle">See your Squishmallows</span>
            </button>

            <button id="settings-btn" class="dashboard-button tertiary">
              <span class="button-icon"><i data-lucide="settings"></i></span>
              <span class="button-text">Settings</span>
              <span class="button-subtitle">Adjust game options</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Game screen (Story 2.2: Basic Game Screen Layout) -->
      <div id="game-screen" class="screen">
        <div class="game-content">
          <!-- Game Header -->
          <div class="game-header">
            <button id="back-to-dashboard-btn" class="back-button">
              <i data-lucide="home"></i>
              <span class="button-text">Back to Dashboard</span>
            </button>
            <div class="game-progress">
              <span class="progress-text"
                >Problem <span id="problem-number">1</span></span
              >
            </div>
          </div>

          <!-- Left Column: Problem and Progress -->
          <div class="game-left-column">
            <!-- Squishmallow Progress Indicator -->
            <div class="squishmallow-progress">
              <div class="squishmallow-outline">
                <div class="squishmallow-fill" id="squishmallow-fill"></div>
                <div class="squishmallow-ears">
                  <div class="ear left"></div>
                  <div class="ear right"></div>
                </div>
              </div>
              <div class="progress-stats">
                <div class="progress-text" id="progress-text">0 / 10 correct</div>
                <div class="lives-container" id="lives-container">
                  <span class="lives-label">Lives:</span>
                  <div class="lives-display" id="lives-display">
                    <i
                      data-lucide="heart"
                      class="life-icon filled"
                      id="life-1"
                    ></i>
                    <i
                      data-lucide="heart"
                      class="life-icon filled"
                      id="life-2"
                    ></i>
                    <i
                      data-lucide="heart"
                      class="life-icon filled"
                      id="life-3"
                    ></i>
                  </div>
                </div>
                <!-- Timer Display (Story 5.4) -->
                <div
                  class="timer-container"
                  id="timer-container"
                  style="display: none"
                >
                  <span class="timer-label">Time:</span>
                  <div class="timer-display" id="timer-display">
                    <span class="timer-minutes">5</span>:<span
                      class="timer-seconds"
                      >00</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- Math Problem Display Area -->
            <div class="problem-container">
              <div class="problem-display">
                <div class="problem-text" id="current-problem">3 Ã— 4 = ?</div>
              </div>
            </div>
          </div>

          <!-- Right Column: Answer Input and Number Pad -->
          <div class="game-right-column">
            <!-- Answer Input Area -->
            <div class="answer-container">
              <div class="answer-display">
                <label for="answer-input" class="answer-label"
                  >Your Answer:</label
                >
                <input
                  type="text"
                  id="answer-input"
                  class="answer-input"
                  placeholder="Enter answer..."
                  readonly
                />
              </div>
            </div>

            <!-- Number Pad -->
            <div class="number-pad-container">
              <div class="number-pad">
                <div class="number-grid">
                  <button class="number-btn" data-number="7">7</button>
                  <button class="number-btn" data-number="8">8</button>
                  <button class="number-btn" data-number="9">9</button>

                  <button class="number-btn" data-number="4">4</button>
                  <button class="number-btn" data-number="5">5</button>
                  <button class="number-btn" data-number="6">6</button>

                  <button class="number-btn" data-number="1">1</button>
                  <button class="number-btn" data-number="2">2</button>
                  <button class="number-btn" data-number="3">3</button>

                  <button class="action-btn clear" id="clear-btn">
                    <i data-lucide="x"></i>
                    <span class="button-text">Clear</span>
                  </button>
                  <button class="number-btn zero" data-number="0">0</button>
                  <button class="action-btn enter" id="enter-btn">
                    <i data-lucide="check"></i>
                    <span class="button-text">Enter</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Story 3.3: Success Screen -->
    <div class="screen" id="success-screen">
      <div class="screen-container">
        <div class="success-content">
          <div class="success-header">
            <h1 class="success-title">
              <i data-lucide="party-popper"></i> Congratulations!
              <i data-lucide="party-popper"></i>
            </h1>
            <p class="success-subtitle">You earned a new Squishmallow!</p>
          </div>

          <div class="reward-display">
            <div class="squishmallow-preview">
              <img
                id="earned-squishmallow-image"
                src="assets/luna_the_cat.png"
                alt="Luna the Cat"
                class="mascot-image earned-squishmallow"
              />
              <h3 id="earned-squishmallow-name" class="squishmallow-name">Luna the Cat</h3>
              <p id="earned-squad" class="squishmallow-squad">Magical Squad</p>
              <p id="earned-description" class="squishmallow-description">A wonderful new friend to add to your collection!</p>
            </div>
          </div>

          <div class="success-stats">
            <p class="stat-text">
              <i data-lucide="sparkles"></i> Problems Solved:
              <span id="final-correct-count">10</span>
            </p>
            <p class="stat-text">
              <i data-lucide="star"></i> Accuracy:
              <span id="final-accuracy">85%</span>
            </p>
          </div>

          <div class="success-buttons">
            <button class="dashboard-button primary" id="success-dashboard-btn">
              <span class="button-icon"><i data-lucide="home"></i></span>
              <span class="button-text">Return to Dashboard</span>
            </button>
            <button class="dashboard-button secondary" id="success-collection-btn">
              <span class="button-icon"><i data-lucide="book-open"></i></span>
              <span class="button-text">View Collection</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Story 3.3: Failure Screen -->
    <div class="screen" id="failure-screen">
      <div class="screen-container">
        <div class="failure-content">
          <div class="failure-header">
            <h1 class="failure-title">ðŸ˜Š Good Try!</h1>
            <p class="failure-subtitle">Let's practice more to get stronger!</p>
          </div>

          <div class="encouragement-display">
            <div class="mascot-encouragement">
              <img
                src="assets/luna_the_cat.png"
                alt="Luna the Cat"
                class="mascot-image encouraging"
              />
              <p class="encouragement-text">
                "You're doing great! Math takes practice, and you're getting
                better every time! <i data-lucide="sparkles"></i>"
              </p>
            </div>
          </div>

          <div class="failure-stats">
            <p class="stat-text">
              <i data-lucide="book-open"></i> Problems Attempted:
              <span id="failure-problem-count">7</span>
            </p>
            <p class="stat-text">
              <i data-lucide="check"></i> Correct Answers:
              <span id="failure-correct-count">4</span>
            </p>
            <p class="stat-text">
              <i data-lucide="target"></i> Keep practicing to earn your
              Squishmallow!
            </p>
          </div>

          <div class="failure-actions">
            <button class="dashboard-button primary" id="try-again-btn">
              <span class="button-icon"><i data-lucide="refresh-cw"></i></span>
              <span class="button-text">Try Again</span>
            </button>
            <button
              class="dashboard-button secondary"
              id="failure-dashboard-btn"
            >
              <span class="button-icon"><i data-lucide="home"></i></span>
              <span class="button-text">Dashboard</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Story 4.2: Collection Screen -->
    <div class="screen" id="collection-screen">
      <div class="screen-container">
        <div class="collection-content">
          <div class="collection-header">
            <h1 class="collection-title">
              <i data-lucide="book-open"></i> My Squishmallow Collection
            </h1>
            <p class="collection-subtitle">
              Keep practicing to collect them all!
            </p>
          </div>

          <div class="collection-stats">
            <div class="stat-badge">
              <span class="stat-number" id="collected-count">0</span>
              <span class="stat-label">Collected</span>
            </div>
            <div class="stat-badge">
              <span class="stat-number" id="total-count">19</span>
              <span class="stat-label">Total</span>
            </div>
            <div class="stat-badge">
              <span class="stat-number" id="completion-percentage">0%</span>
              <span class="stat-label">Complete</span>
            </div>
          </div>

          <div class="collection-grid" id="collection-grid">
            <!-- Squishmallows will be populated by JavaScript -->
          </div>

          <button
            class="dashboard-button primary"
            id="collection-dashboard-btn"
          >
            <span class="button-icon"><i data-lucide="home"></i></span>
            <span class="button-text">Return to Dashboard</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Settings Screen -->
    <div class="screen" id="settings-screen">
      <div class="screen-container">
        <div class="settings-content">
          <div class="settings-header">
            <h1 class="settings-title">
              <i data-lucide="settings"></i> Game Settings
            </h1>
            <p class="settings-subtitle">
              Customize the game for your child's learning level
            </p>
          </div>

          <div class="settings-form">

            <div class="setting-section">
              <h3><i data-lucide="calculator"></i> Math Operations</h3>
              <div class="setting-group">
                <label class="setting-label">
                  <input
                    type="checkbox"
                    id="operation-addition"
                    value="addition"
                  />
                  <span class="checkbox-label">Addition (+)</span>
                </label>
                <label class="setting-label">
                  <input
                    type="checkbox"
                    id="operation-subtraction"
                    value="subtraction"
                  />
                  <span class="checkbox-label">Subtraction (âˆ’)</span>
                </label>
                <label class="setting-label">
                  <input
                    type="checkbox"
                    id="operation-multiplication"
                    value="multiplication"
                    checked
                  />
                  <span class="checkbox-label">Multiplication (Ã—)</span>
                </label>
                <label class="setting-label">
                  <input
                    type="checkbox"
                    id="operation-division"
                    value="division"
                  />
                  <span class="checkbox-label">Division (Ã·)</span>
                </label>
              </div>
              <p class="setting-description">
                Select one or more operations to practice
              </p>
            </div>

            <div class="setting-section">
              <h3><i data-lucide="hash"></i> Number Ranges</h3>
              <div class="setting-group">
                <div class="range-control">
                  <label class="setting-label">
                    Multiplication/Division - Highest times table:
                    <input
                      type="number"
                      id="mult-range"
                      min="5"
                      max="20"
                      value="12"
                      step="1"
                    />
                  </label>
                  <p class="setting-description">
                    Practices times tables up to this number (e.g., 8 = 0Ã—8 through 12Ã—8)
                  </p>
                </div>

                <div class="range-control">
                  <label class="setting-label">
                    Addition/Subtraction - Number size:
                    <select id="add-range">
                      <option value="ones">Ones (1-9)</option>
                      <option value="tens" selected>Tens (1-99)</option>
                      <option value="hundreds">Hundreds (1-999)</option>
                    </select>
                  </label>
                  <p class="setting-description">
                    Choose the size of numbers for addition and subtraction
                  </p>
                </div>
              </div>
            </div>

            <div class="setting-section">
              <h3><i data-lucide="clock"></i> Game Length</h3>
              <div class="setting-group">
                <label class="setting-label">
                  Problems to complete:
                  <select id="game-length-select">
                    <option value="5">5 problems</option>
                    <option value="10" selected>10 problems</option>
                    <option value="15">15 problems</option>
                    <option value="20">20 problems</option>
                  </select>
                </label>
              </div>
            </div>

            <div class="setting-section">
              <h3><i data-lucide="heart"></i> Lives System</h3>
              <div class="setting-group">
                <label class="setting-label">
                  <input type="checkbox" id="lives-enabled" checked />
                  <span class="checkbox-label">Enable 3-lives system</span>
                </label>
                <p class="setting-description">
                  When disabled, students can keep trying until they succeed
                </p>
              </div>
            </div>

            <div class="setting-section">
              <h3><i data-lucide="timer"></i> Timer Settings</h3>
              <div class="setting-group">
                <label class="setting-label">
                  Time limit per game:
                  <select id="timer-select">
                    <option value="0">No Limit</option>
                    <option value="60">1 minute</option>
                    <option value="180">3 minutes</option>
                    <option value="300">5 minutes</option>
                    <option value="600">10 minutes</option>
                  </select>
                </label>
                <p class="setting-description">
                  Choose a time limit or select "No Limit" for stress-free
                  practice
                </p>
              </div>
            </div>
          </div>

          <div class="settings-buttons">
            <button class="dashboard-button secondary" id="settings-cancel-btn">
              <span class="button-icon"><i data-lucide="x"></i></span>
              <span class="button-text">Cancel</span>
            </button>
            <button class="dashboard-button primary" id="settings-save-btn">
              <span class="button-icon"><i data-lucide="save"></i></span>
              <span class="button-text">Save Settings</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript Files -->
    <!-- Load MathEngine first (Story 2.1) -->
    <script src="js/math-engine.js"></script>
    <!-- Load Collection Manager (Story 4.1) -->
    <script src="js/collection-manager.js"></script>
    <!-- Main Application -->
    <script src="js/main.js"></script>

    <!-- Initialize Lucide Icons -->
    <script>
      lucide.createIcons();
    </script>
  </body>
</html>
